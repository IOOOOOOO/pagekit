!function(t){var e={};function s(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=30)}([function(t,e,s){"use strict";function a(t,e,s,a,n,i,r,u){var o,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=s,l._compiled=!0),a&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),r?(o=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},l._ssrRegister=o):n&&(o=u?function(){n.call(this,this.$root.$options.shadowRoot)}:n),o)if(l.functional){l._injectStyles=o;var c=l.render;l.render=function(t,e){return o.call(e),c(t,e)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,o):[o]}return{exports:t,options:l}}s.d(e,"a",function(){return a})},function(t,e,s){"use strict";s.r(e);var a=s(2),n=s.n(a);for(var i in a)"default"!==i&&function(t){s.d(e,t,function(){return a[t]})}(i);e.default=n.a},function(t,e,s){t.exports={mixins:[s(7)],methods:{install(t,e,s,a){return this.$set(this,"pkg",t),this.cb=s,self=this,this.$http.get("admin/system/package/install",{params:{package:t,packagist:Boolean(a)},progress(){self.init(this)}}).then(function(){if("success"===this.status&&e){const s=_.findIndex(e,{name:t.name});-1!==s?e.splice(s,1,t):e.push(t)}},function(t){this.$notify(t.data,"danger"),this.close()})},enable(){this.$parent.enable(this.pkg),this.close()}}}},function(t,e,s){"use strict";s.r(e);var a=s(4),n=s.n(a);for(var i in a)"default"!==i&&function(t){s.d(e,t,function(){return a[t]})}(i);e.default=n.a},function(t,e,s){t.exports={mixins:[s(7)],methods:{uninstall(t,e){return this.$set(this,"pkg",t),self=this,this.$http.get("admin/system/package/uninstall",{params:{name:t.name},progress(){self.init(this)}}).then(function(){"success"===this.status&&e&&e.splice(e.indexOf(t),1)},function(t){this.$notify(t.data,"danger"),this.close()})}}}},function(t,e,s){"use strict";s.r(e);var a=s(6),n=s.n(a);for(var i in a)"default"!==i&&function(t){s.d(e,t,function(){return a[t]})}(i);e.default=n.a},function(t,e,s){t.exports={mixins:[s(7)],methods:{update(t,e,s,a){return this.$set(this,"pkg",t),this.$set(this,"updatePkg",e[t.name]),this.cb=s,self=this,this.$http.get("admin/system/package/install",{params:{package:e[t.name],packagist:Boolean(a)},progress(){self.init(this)}}).then(function(){"loading"===this.status&&(this.status="error"),"success"===this.status&&Vue.delete(e,t.name),t.enabled&&this.$parent.enable(t).then(null,function(){this.status="error"})},function(t){this.$notify(t.data,"danger"),this.close()})}}}},function(t,e){t.exports={data:()=>({pkg:{},updatePkg:{},output:"",status:"loading",options:{bgClose:!1,escClose:!1}}),created(){this.$mount()},methods:{init(t){return this.open(),this.setOutput(t.responseText)},setOutput(t){const e=t.split("\n"),s=e[e.length-1].match(/^status=(success|error)$/);s?(this.status=s[1],delete e[e.length-1],this.output=e.join("\n")):this.output=t},open(){this.$refs.output.open(),UIkit.util.on(this.$refs.output.modal.$el,"hide",this.onClose)},close(){this.$refs.output.close()},onClose(){this.cb&&this.cb(this),this.$destroy()}},watch:{status(){"loading"!==this.status&&(this.$refs.output.modal.$options.props.bgclose=!0,this.$refs.output.modal.$options.props.keyboard=!0)}}}},function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-modal",{ref:"output",attrs:{options:t.options}},[s("div",{staticClass:"uk-modal-header uk-flex uk-flex-middle"},[s("h2",[t._v(t._s(t._f("trans")("Updating %title% to %version%",{title:t.pkg.title,version:t.updatePkg.version})))])]),t._v(" "),s("div",{staticClass:"uk-modal-body"},[s("pre",{staticClass:"pk-pre uk-text-break",domProps:{innerHTML:t._s(t.output)}}),t._v(" "),s("v-loader",{directives:[{name:"show",rawName:"v-show",value:"loading"==t.status,expression:"status == 'loading'"}]}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"success"==t.status,expression:"status == 'success'"}],staticClass:"uk-alert uk-alert-success"},[t._v("\n            "+t._s(t._f("trans")("Successfully updated."))+"\n        ")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"error"==t.status,expression:"status == 'error'"}],staticClass:"uk-alert uk-alert-danger"},[t._v("\n            "+t._s(t._f("trans")("Error"))+"\n        ")])],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"loading"!=t.status,expression:"status != 'loading'"}],staticClass:"uk-modal-footer uk-text-right"},[s("a",{staticClass:"uk-button uk-button-secondary",on:{click:function(e){return e.preventDefault(),t.close(e)}}},[t._v(t._s(t._f("trans")("Close")))])])])},n=[];s.d(e,"a",function(){return a}),s.d(e,"b",function(){return n})},function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-modal",{ref:"output",attrs:{options:t.options}},[s("div",{staticClass:"uk-modal-header uk-flex uk-flex-middle"},[s("h2",[t._v(t._s(t._f("trans")("Removing %title% %version%",{title:t.pkg.title,version:t.pkg.version})))])]),t._v(" "),s("div",{staticClass:"uk-modal-body"},[s("pre",{staticClass:"pk-pre uk-text-break",domProps:{innerHTML:t._s(t.output)}}),t._v(" "),s("v-loader",{directives:[{name:"show",rawName:"v-show",value:"loading"==t.status,expression:"status == 'loading'"}]}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"success"==t.status,expression:"status == 'success'"}],staticClass:"uk-alert uk-alert-success"},[t._v("\n            "+t._s(t._f("trans")("Successfully removed."))+"\n        ")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"error"==t.status,expression:"status == 'error'"}],staticClass:"uk-alert uk-alert-danger"},[t._v("\n            "+t._s(t._f("trans")("Error"))+"\n        ")])],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"loading"!=t.status,expression:"status != 'loading'"}],staticClass:"uk-modal-footer uk-text-right"},[s("a",{staticClass:"uk-button uk-button-secondary",on:{click:function(e){return e.preventDefault(),t.close(e)}}},[t._v(t._s(t._f("trans")("Close")))])])])},n=[];s.d(e,"a",function(){return a}),s.d(e,"b",function(){return n})},function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-modal",{ref:"output",attrs:{options:t.options}},[s("div",{staticClass:"uk-modal-header uk-flex uk-flex-middle"},[s("h2",[t._v(t._s(t._f("trans")("Installing %title% %version%",{title:t.pkg.title,version:t.pkg.version})))])]),t._v(" "),s("div",{staticClass:"uk-modal-body"},[s("pre",{staticClass:"pk-pre uk-text-break",domProps:{innerHTML:t._s(t.output)}}),t._v(" "),s("v-loader",{directives:[{name:"show",rawName:"v-show",value:"loading"==t.status,expression:"status == 'loading'"}]}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"success"==t.status,expression:"status == 'success'"}],staticClass:"uk-alert uk-alert-success"},[t._v("\n            "+t._s(t._f("trans")("Successfully installed."))+"\n        ")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"error"==t.status,expression:"status == 'error'"}],staticClass:"uk-alert uk-alert-danger"},[t._v("\n            "+t._s(t._f("trans")("Error"))+"\n        ")])],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"loading"!=t.status,expression:"status != 'loading'"}],staticClass:"uk-modal-footer uk-text-right"},[s("a",{staticClass:"uk-button uk-button-secondary",on:{click:function(e){return e.preventDefault(),t.close(e)}}},[t._v(t._s(t._f("trans")("Close")))]),t._v(" "),s("a",{directives:[{name:"show",rawName:"v-show",value:"success"==t.status,expression:"status == 'success'"}],staticClass:"uk-button uk-button-primary",on:{click:function(e){return e.preventDefault(),t.enable(e)}}},[t._v(t._s(t._f("trans")("Enable")))])])])},n=[];s.d(e,"a",function(){return a}),s.d(e,"b",function(){return n})},,,,,function(t,e,s){const a=Vue.extend(s(18).default),n=Vue.extend(s(19).default),i=Vue.extend(s(20).default);t.exports={methods:{queryUpdates(t,e){const s={};return _.each(t,t=>{s[t.name]=t.version}),this.$http.post(`${this.api}/api/package/update`,{packages:JSON.stringify(s)},{emulateJSON:!0}).then(e,this.error)},enable(t){return this.$http.post("admin/system/package/enable",{name:t.name}).then(function(){this.$notify(this.$trans('"%title%" enabled.',{title:t.title})),Vue.set(t,"enabled",!0),document.location.assign(this.$url(`admin/system/package/${"pagekit-theme"===t.type?"themes":"extensions"}`))},this.error)},disable(t){return this.$http.post("admin/system/package/disable",{name:t.name}).then(function(){this.$notify(this.$trans('"%title%" disabled.',{title:t.title})),Vue.set(t,"enabled",!1),document.location.reload()},this.error)},install(t,e,s,n){return new a({parent:this}).install(t,e,s,n)},update(t,e,s,a){return new i({parent:this}).update(t,e,s,a)},uninstall(t,e){return new n({parent:this}).uninstall(t,e)},error(t){this.$notify(t.data,"danger")}}}},,,function(t,e,s){"use strict";s.r(e);var a=s(10),n=s(1);for(var i in n)"default"!==i&&function(t){s.d(e,t,function(){return n[t]})}(i);var r=s(0),u=Object(r.a)(n.default,a.a,a.b,!1,null,null,null);e.default=u.exports},function(t,e,s){"use strict";s.r(e);var a=s(9),n=s(3);for(var i in n)"default"!==i&&function(t){s.d(e,t,function(){return n[t]})}(i);var r=s(0),u=Object(r.a)(n.default,a.a,a.b,!1,null,null,null);e.default=u.exports},function(t,e,s){"use strict";s.r(e);var a=s(8),n=s(5);for(var i in n)"default"!==i&&function(t){s.d(e,t,function(){return n[t]})}(i);var r=s(0),u=Object(r.a)(n.default,a.a,a.b,!1,null,null,null);e.default=u.exports},,,function(t,e,s){"use strict";s.r(e);var a=s(24),n=s.n(a);for(var i in a)"default"!==i&&function(t){s.d(e,t,function(){return a[t]})}(i);e.default=n.a},function(t,e,s){t.exports={mixins:[s(15)],props:{api:{type:String,default:""},search:{type:String,default:""},page:{type:Number,default:0},type:{type:String,default:"pagekit-extension"},installed:{type:Array,default:()=>[]}},data:()=>({pkg:null,packages:null,updates:null,pages:0,iframe:"",status:""}),created(){this.$options.name=this.type},mounted(){this.$watch("page",this.query,{immediate:!0}),this.queryUpdates(this.installed,function(t){const{data:e}=t;this.$set(this,"updates",e.packages.length?e.packages:null)})},watch:{search(){this.page?this.page=0:this.query()},type(){this.page?this.page=0:this.query()}},methods:{query(){const t=`${this.api}/api/package/search`;this.$http.post(t,{q:this.search,type:this.type,page:this.page},{emulateJSON:!0}).then(function(t){const{data:e}=t;this.$set(this,"packages",e.packages),this.$set(this,"pages",e.pages)},function(){this.$set(this,"packages",null),this.$set(this,"status","error")})},details(t){this.modal||(this.modal=UIkit.modal(this.$refs.modal)),this.$set(this,"pkg",t),this.$set(this,"status",""),this.modal.show()},doInstall(t){this.modal.hide(),this.install(t,this.installed)},isInstalled(t){return _.isObject(t)?_.find(this.installed,{name:t.name}):void 0},marked:marked}}},,,function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"uk-grid-medium uk-grid-match uk-child-width-1-2@s uk-child-width-1-3@m",attrs:{"uk-grid":""}},t._l(t.packages,function(e){return s("div",[s("div",{staticClass:"uk-card uk-card-default"},[s("div",{staticClass:"uk-card-media-top"},[s("div",{staticClass:"uk-inline-clip uk-transition-toggle"},[s("div",{staticClass:"uk-background-cover uk-position-cover",style:{"background-image":"url("+e.extra.image+")"}}),t._v(" "),s("canvas",{staticClass:"uk-responsive-width uk-display-block",attrs:{width:"1200",height:"800"}}),t._v(" "),s("div",{staticClass:"uk-transition-fade uk-position-cover uk-position-small uk-overlay uk-overlay-default uk-flex uk-flex-center uk-flex-middle"})])]),t._v(" "),s("div",{staticClass:"uk-card-body uk-padding-small"},[s("h2",{staticClass:"uk-card-title uk-margin-remove"},[t._v("\n                        "+t._s(e.title)+"\n                    ")]),t._v(" "),s("p",{staticClass:"uk-text-muted uk-margin-remove"},[t._v("\n                        "+t._s(e.author.name)+"\n                    ")])]),t._v(" "),s("a",{staticClass:"uk-position-cover",on:{click:function(s){return s.preventDefault(),t.details(e)}}})])])}),0),t._v(" "),s("v-pagination",{directives:[{name:"show",rawName:"v-show",value:t.pages>1||t.page>0,expression:"pages > 1 || page > 0"}],attrs:{current:t.page,pages:t.pages},on:{"update:current":function(e){t.page=e}},model:{value:t.$parent.page,callback:function(e){t.$set(t.$parent,"page",e)},expression:"$parent.page"}}),t._v(" "),s("div",{ref:"modal",staticClass:"uk-modal-container",attrs:{"uk-modal":""}},[s("div",{staticClass:"uk-modal-dialog marketplace"},[s("button",{staticClass:"uk-modal-close-outside uk-close-large",attrs:{type:"button","uk-close":""}}),t._v(" "),t.pkg?s("div",[s("div",{staticClass:"pk-modal-dialog-badge"},[t.isInstalled(t.pkg)?s("button",{staticClass:"uk-button uk-button-default",attrs:{disabled:""}},[t._v("\n                        "+t._s(t._f("trans")("Installed"))+"\n                    ")]):s("button",{staticClass:"uk-button uk-button-primary",on:{click:function(e){return e.preventDefault(),t.doInstall(t.pkg)}}},[t._v("\n                        "+t._s(t._f("trans")("Install"))+"\n                    ")])]),t._v(" "),s("div",{staticClass:"uk-modal-header"},[s("h2",{staticClass:"uk-margin-remove"},[t._v("\n                        "+t._s(t.pkg.title)+"\n                    ")]),t._v(" "),s("ul",{staticClass:"uk-subnav uk-subnav-divider uk-margin-remove-top"},[t.pkg.author.homepage?s("li",[s("a",{staticClass:"uk-link-muted",attrs:{href:t.pkg.author.homepage,target:"_blank"}},[t._v(t._s(t.pkg.author.name))])]):s("li",{staticClass:"uk-text-muted"},[s("span",[t._v(t._s(t.pkg.author.name))])]),t._v(" "),s("li",{staticClass:"uk-text-muted"},[s("span",[t._v(t._s(t._f("trans")("Version %version%",{version:t.pkg.version})))])]),t._v(" "),t.pkg.license?s("li",{staticClass:"uk-text-muted"},[s("span",[t._v(t._s(t.pkg.license))])]):t._e()])]),t._v(" "),s("div",{staticClass:"uk-modal-body"},[s("div",{attrs:{"uk-grid":""}},[s("div",{staticClass:"uk-width-1-2@m"},[s("img",{attrs:{width:"1200",height:"800",alt:t.pkg.title,src:t.pkg.extra.image}})]),t._v(" "),s("div",{staticClass:"uk-width-1-2@m"},[t.pkg.description?s("div",{domProps:{innerHTML:t._s(t.marked(t.pkg.description))}}):t._e(),t._v(" "),s("ul",{staticClass:"uk-grid-small",attrs:{"uk-grid":""}},[t.pkg.demo?s("li",[s("a",{staticClass:"uk-button uk-button-default",attrs:{href:t.pkg.demo,target:"_blank"}},[t._v(t._s(t._f("trans")("Demo")))])]):t._e(),t._v(" "),t.pkg.support?s("li",[s("a",{staticClass:"uk-button uk-button-default",attrs:{href:t.pkg.support,target:"_blank"}},[t._v(t._s(t._f("trans")("Support")))])]):t._e(),t._v(" "),t.pkg.documentation?s("li",[s("a",{staticClass:"uk-button uk-button-default",attrs:{href:t.pkg.documentation,target:"_blank"}},[t._v(t._s(t._f("trans")("Documentation")))])]):t._e()])])])])]):t._e()])]),t._v(" "),s("h3",{directives:[{name:"show",rawName:"v-show",value:t.packages&&!t.packages.length,expression:"packages && !packages.length"}],staticClass:"uk-h1 uk-text-muted uk-text-center"},[t._v("\n        "+t._s(t._f("trans")("Nothing found."))+"\n    ")]),t._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:"error"==t.status,expression:"status == 'error'"}],staticClass:"uk-alert uk-alert-warning"},[t._v("\n        "+t._s(t._f("trans")("Cannot connect to the marketplace. Please try again later."))+"\n    ")])],1)},n=[];s.d(e,"a",function(){return a}),s.d(e,"b",function(){return n})},,,function(t,e,s){t.exports={name:"marketplace",el:"#marketplace",data(){return _.extend({search:this.$session.get("marketplace.search","")},window.$data)},mounted(){},watch:{search(t){this.$session.set("marketplace.search",t)}},components:{marketplace:s(31).default}},Vue.ready(t.exports)},function(t,e,s){"use strict";s.r(e);var a=s(27),n=s(23);for(var i in n)"default"!==i&&function(t){s.d(e,t,function(){return n[t]})}(i);var r=s(0),u=Object(r.a)(n.default,a.a,a.b,!1,null,null,null);e.default=u.exports}]);