!function(t){var e={};function i(s){if(e[s])return e[s].exports;var a=e[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=16)}([function(t,e){t.exports=UIkit.util},function(t,e,i){"use strict";function s(t,e,i,s,a,n,o,r){var l,d="function"==typeof t?t.options:t;if(e&&(d.render=e,d.staticRenderFns=i,d._compiled=!0),s&&(d.functional=!0),n&&(d._scopeId="data-v-"+n),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},d._ssrRegister=l):a&&(l=r?function(){a.call(this,this.$root.$options.shadowRoot)}:a),l)if(d.functional){d._injectStyles=l;var u=d.render;d.render=function(t,e){return l.call(e),u(t,e)}}else{var c=d.beforeCreate;d.beforeCreate=c?[].concat(c,l):[l]}return{exports:t,options:d}}i.d(e,"a",function(){return s})},function(t,e,i){"use strict";var s=i(3),a=i.n(s);e.default=a.a},function(t,e){t.exports={name:"panel",props:{widget:{}},data:()=>({editing:!1}),created(){this.$options.components=this.$parent.$options.components},computed:{type(){return this.$root.getType(this.widget.type)}},methods:{edit(){this.$set(this,"editing",!0)},save(){this.$root.save(this.widget),this.$set(this,"editing",!1)},remove(){this.$root.remove(this.widget)}}}},function(t,e,i){"use strict";var s=i(5),a=i.n(s);e.default=a.a},function(t,e){t.exports={name:"feed",type:{id:"feed",label:"Feed",description(){},defaults:{count:5,url:"http://pagekit.com/blog/feed",content:""}},replace:!1,props:["widget","editing"],data:()=>({status:"",feed:{},head:{title:"",description:""}}),computed:{count(){const t=this;if(this.feed.entries)return this.feed.entries.filter((e,i)=>i<t.widget.count)}},watch:{"widget.url":function(t){t||this.$parent.edit(!0),this.load()},"widget.count":function(t,e){const{entries:i}=this.feed;i&&t>e&&t>i.length&&this.load()}},mounted(){this.widget.url&&this.load()},methods:{load(){this.$set(this,"feed",{}),this.$set(this,"status",""),this.widget.url&&(this.$set(this,"status","loading"),this.$http.get(`https://api.rss2json.com/v1/api.json?rss_url=${this.widget.url}`,{},{cache:60}).then(function(t){const{data:e}=t;this.widget.count;if(200===t.status&&e.items&&e.items.length){const t=e.items;t.forEach(t=>{t.publishedDate=new Date(t.pubDate.replace(/\s+/g,"T")),t.contentSnippet=t.description.replace(/<(\/)?p([^>]*)>/g,"<$1p$2>")}),this.feed={entries:t},this.head.title=e.feed.title?e.feed.title:"",this.head.description=e.feed.description?e.feed.description:"",this.status="done"}else this.status="error"},function(){this.status="error"}))}}}},function(t,e,i){"use strict";var s=i(7),a=i.n(s);e.default=a.a},function(t,e){const{on:i}=UIkit.util,{append:s}=UIkit.util;t.exports={name:"location",type:{id:"location",label:"Location",disableToolbar:!0,description(){},defaults:{units:"metric"}},replace:!1,props:["widget","editing"],data:()=>({status:"",timezone:{},icon:"",temp:0,time:0,format:"shortTime"}),mounted(){const t=this;let e;const a=UIkit.autocomplete(this.$refs.autocomplete,{source(i){t.$http.get("admin/dashboard/weather",{params:{action:"find",data:{q:this.input.value,type:"like"}}}).then(t=>{const{data:s}=t;e=s.list||[],i(e)},()=>{i([])})},template:'<ul class="uk-nav uk-dropdown-nav uk-autocomplete-results">                              {{~items}}<li data-id="{{$item.id}}"><a>{{$item.name}} <span>, {{$item.sys.country}}</span></a></li>{{/items}}                              {{^items.length}}<li class="uk-skip"><a class="uk-text-muted">{{msgNoResults}}</a></li>{{/end}}                            </ul>',renderer(e){s(this.dropdown,this.template({items:e||[],msgNoResults:t.$trans("No location found.")})),this.show()}});i(a.$el,"select",(i,s,a)=>{if(!a||!a.id)return;const n=_.find(e,{id:parseInt(a.id)});Vue.nextTick(()=>{t.$refs.location.blur()}),n&&(t.$set(t.widget,"uid",n.id),t.$set(t.widget,"city",n.name),t.$set(t.widget,"country",n.sys.country),t.$set(t.widget,"coords",n.coord))}),this.timer=setInterval(this.updateClock(),6e4)},watch:{"widget.uid":{handler(t){void 0===t&&(this.$set(this.widget,"uid",""),this.$parent.save(),this.$parent.edit(!0)),t&&this.load()},immediate:!0},timezone:"updateClock"},computed:{location(){return this.widget.city?`${this.widget.city}, ${this.widget.country}`:""},temperature(){return"imperial"!==this.widget.units?`${Math.round(this.temp)} °C`:`${Math.round(1.8*this.temp+32)} °F`}},methods:{load(){this.widget.uid&&(this.$http.get("admin/dashboard/weather",{params:{action:"weather",data:{id:this.widget.uid,units:"metric"}},cache:60}).then(function(t){const{data:e}=t;200==e.cod?this.init(e):this.$set(this,"status","error")},function(){this.$set(this,"status","error")}),this.$http.get("https://maps.googleapis.com/maps/api/timezone/json",{params:{location:`${this.widget.coords.lat},${this.widget.coords.lon}`,timestamp:Math.floor(Date.now()/1e3)},cache:{key:`timezone-${this.widget.coords.lat}${this.widget.coords.lon}`,lifetime:1440}}).then(function(t){const{data:e}=t;e.offset=e.rawOffset+e.dstOffset,this.$set(this,"timezone",e)},function(){this.$set(this,"status","error")}))},init(t){this.$set(this,"temp",t.main.temp),this.$set(this,"icon",this.getIconUrl(t.weather[0].icon)),this.$set(this,"status","done")},getIconUrl(t){return this.$url("app/system/modules/dashboard/assets/images/weather-{icon}",{icon:{"01d":"sun.svg","01n":"moon.svg","02d":"cloud-sun.svg","02n":"cloud-moon.svg","03d":"cloud.svg","03n":"cloud.svg","04d":"cloud.svg","04n":"cloud.svg","09d":"drizzle-sun.svg","09n":"drizzle-moon.svg","10d":"rain-sun.svg","10n":"rain-moon.svg","11d":"lightning.svg","11n":"lightning.svg","13d":"snow.svg","13n":"snow.svg","50d":"fog.svg","50n":"fog.svg"}[t]})},updateClock(){const t=this.timezone.offset||0,e=new Date,i=t?new Date(e.getTime()+6e4*e.getTimezoneOffset()+1e3*t):new Date;return this.$set(this,"time",i),this.updateClock},clear(){this.$refs.location.value=""}},destroyed(){clearInterval(this.timer)}}},function(t,e){t.exports=UIkit},function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.type.disableToolbar?t._e():i("div",{staticClass:"uk-card-badge"},[i("ul",{staticClass:"uk-iconnav uk-invisible-hover"},[i("li",{directives:[{name:"show",rawName:"v-show",value:!1!==t.type.editable&&!t.editing,expression:"type.editable !== false && !editing"}]},[i("a",{attrs:{"uk-icon":"file-edit",title:t._f("trans")("Edit"),"uk-tooltip":"delay: 500"},on:{click:function(e){return e.preventDefault(),t.edit(e)}}})]),t._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:!t.editing,expression:"!editing"}]},[i("a",{staticClass:"uk-sortable-handle",attrs:{"uk-icon":"more-vertical",title:t._f("trans")("Drag"),"uk-tooltip":"delay: 500"}})]),t._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:t.editing,expression:"editing"}]},[i("a",{directives:[{name:"confirm",rawName:"v-confirm",value:"Delete widget?",expression:"'Delete widget?'"}],attrs:{"uk-icon":"trash",title:t._f("trans")("Delete"),"uk-tooltip":"delay: 500"},on:{click:function(e){return e.preventDefault(),t.remove(e)}}})]),t._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:t.editing,expression:"editing"}]},[i("a",{attrs:{"uk-icon":"check",title:t._f("trans")("Close"),"uk-tooltip":"delay: 500"},on:{click:function(e){return e.preventDefault(),t.save(e)}}})])])]),t._v(" "),i(t.type.component,{tag:"component",attrs:{widget:t.widget,editing:t.editing}})],1)},a=[];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.editing?i("div",{staticClass:"uk-card-header pk-panel-teaser"},[i("form",{staticClass:"uk-form-stacked"},[i("div",{staticClass:"uk-margin"},[i("label",{staticClass:"uk-form-label",attrs:{for:"form-feed-title"}},[t._v(t._s(t._f("trans")("Title")))]),t._v(" "),i("div",{staticClass:"uk-form-controls"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.widget.title,expression:"widget.title"}],staticClass:"uk-width-1-1 uk-input",attrs:{id:"form-feed-title",type:"text",name:"widget[title]"},domProps:{value:t.widget.title},on:{input:function(e){e.target.composing||t.$set(t.widget,"title",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"uk-margin"},[i("label",{staticClass:"uk-form-label",attrs:{for:"form-feed-url"}},[t._v(t._s(t._f("trans")("URL")))]),t._v(" "),i("div",{staticClass:"uk-form-controls"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.widget.url,expression:"widget.url"}],staticClass:"uk-width-1-1 uk-input",attrs:{id:"form-feed-url",type:"text",name:"url",lazy:""},domProps:{value:t.widget.url},on:{input:function(e){e.target.composing||t.$set(t.widget,"url",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"uk-margin"},[i("label",{staticClass:"uk-form-label",attrs:{for:"form-feed-count"}},[t._v(t._s(t._f("trans")("Number of Posts")))]),t._v(" "),i("div",{staticClass:"uk-form-controls"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.widget.count,expression:"widget.count"}],staticClass:"uk-select uk-width-1-1",attrs:{id:"form-feed-count",number:""},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.widget,"count",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"1"}},[t._v("\n                            1\n                        ")]),t._v(" "),i("option",{attrs:{value:"2"}},[t._v("\n                            2\n                        ")]),t._v(" "),i("option",{attrs:{value:"3"}},[t._v("\n                            3\n                        ")]),t._v(" "),i("option",{attrs:{value:"4"}},[t._v("\n                            4\n                        ")]),t._v(" "),i("option",{attrs:{value:"5"}},[t._v("\n                            5\n                        ")]),t._v(" "),i("option",{attrs:{value:"6"}},[t._v("\n                            6\n                        ")]),t._v(" "),i("option",{attrs:{value:"7"}},[t._v("\n                            7\n                        ")]),t._v(" "),i("option",{attrs:{value:"8"}},[t._v("\n                            8\n                        ")]),t._v(" "),i("option",{attrs:{value:"9"}},[t._v("\n                            9\n                        ")]),t._v(" "),i("option",{attrs:{value:"10"}},[t._v("\n                            10\n                        ")])])])]),t._v(" "),i("div",{staticClass:"uk-margin"},[i("span",{staticClass:"uk-form-label"},[t._v(t._s(t._f("trans")("Post Content")))]),t._v(" "),i("div",{staticClass:"uk-form-controls uk-form-controls-text"},[i("p",{staticClass:"uk-margin-small"},[i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.widget.content,expression:"widget.content"}],staticClass:"uk-radio",attrs:{type:"radio",value:""},domProps:{checked:t._q(t.widget.content,"")},on:{change:function(e){return t.$set(t.widget,"content","")}}}),t._v(" "+t._s(t._f("trans")("Don't show")))])]),t._v(" "),i("p",{staticClass:"uk-margin-small"},[i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.widget.content,expression:"widget.content"}],staticClass:"uk-radio",attrs:{type:"radio",value:"1"},domProps:{checked:t._q(t.widget.content,"1")},on:{change:function(e){return t.$set(t.widget,"content","1")}}}),t._v(" "+t._s(t._f("trans")("Show on all posts")))])]),t._v(" "),i("p",{staticClass:"uk-margin-small"},[i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.widget.content,expression:"widget.content"}],staticClass:"uk-radio",attrs:{type:"radio",value:"2"},domProps:{checked:t._q(t.widget.content,"2")},on:{change:function(e){return t.$set(t.widget,"content","2")}}}),t._v(" "+t._s(t._f("trans")("Only show on first post.")))])])])])])]):t._e(),t._v(" "),i("div",{staticClass:"uk-card-body"},["loading"!=t.status?i("div",[t.widget.title?i("h3",{staticClass:"uk-card-title"},[t._v("\n                "+t._s(t.widget.title)+"\n            ")]):i("div",{staticClass:"uk-margin-bottom"},[!t.widget.title&&t.head.title?i("h3",{staticClass:"uk-card-title uk-margin-remove-bottom"},[t._v("\n                    "+t._s(t.head.title)+"\n                ")]):t._e(),t._v(" "),!t.widget.title&&t.head.title&&t.head.description?i("p",{staticClass:"uk-margin-remove uk-text-small uk-text-meta"},[t._v("\n                    "+t._s(t.head.description)+"\n                ")]):t._e()]),t._v(" "),i("ul",{staticClass:"uk-list uk-list-divider uk-margin-remove"},t._l(t.count,function(e,s){return i("li",{key:s},[i("a",{attrs:{href:e.link,target:"_blank"},domProps:{innerHTML:t._s(e.title)}}),t._v(" "),i("p",{staticClass:"uk-text-small uk-text-muted uk-text-nowrap uk-margin-remove-top uk-margin-small-bottom"},[t._v("\n                        "+t._s(t._f("relativeDate")(e.publishedDate))+"\n                    ")]),t._v(" "),"1"==t.widget.content?i("p",{staticClass:"uk-margin-small-top uk-text-justify uk-text-small",domProps:{innerHTML:t._s(e.contentSnippet)}}):t._e(),t._v(" "),"2"==t.widget.content?i("p",{staticClass:"uk-margin-small-top uk-text-justify uk-text-small",domProps:{innerHTML:t._s(0==t.$index?e.contentSnippet:"")}}):t._e()])}),0),t._v(" "),"error"==t.status?i("div",[t._v("\n                "+t._s(t._f("trans")("Unable to retrieve feed data."))+"\n            ")]):t._e(),t._v(" "),t.widget.url||t.editing?t._e():i("div",[t._v("\n                "+t._s(t._f("trans")("No URL given."))+"\n            ")])]):i("div",{staticClass:"uk-text-center"},[i("v-loader")],1)])])},a=[];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"uk-card-badge"},[i("ul",{staticClass:"uk-iconnav uk-invisible-hover"},[i("li",{directives:[{name:"show",rawName:"v-show",value:!t.editing,expression:"!editing"}],staticClass:"uk-light"},[i("a",{staticClass:"uk-link-muted",attrs:{"uk-icon":"file-edit",title:t._f("trans")("Edit"),"uk-tooltip":"delay: 500"},on:{click:function(e){return e.preventDefault(),t.$parent.edit(e)}}})]),t._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:!t.editing,expression:"!editing"}],staticClass:"uk-light"},[i("a",{staticClass:"uk-link-muted uk-sortable-handle",attrs:{"uk-icon":"more-vertical",title:t._f("trans")("Drag"),"uk-tooltip":"delay: 500"}})]),t._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:t.editing,expression:"editing"}]},[i("a",{directives:[{name:"confirm",rawName:"v-confirm",value:"Delete widget?",expression:"'Delete widget?'"}],attrs:{"uk-icon":"trash",title:t._f("trans")("Delete"),"uk-tooltip":"delay: 500"},on:{click:function(e){return e.preventDefault(),t.$parent.remove(e)}}})]),t._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:t.editing,expression:"editing"}]},[i("a",{attrs:{"uk-icon":"check",title:t._f("trans")("Close"),"uk-tooltip":"delay: 500"},on:{click:function(e){return e.preventDefault(),t.$parent.save(e)}}})])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.editing,expression:"editing"}],staticClass:"uk-card-header pk-panel-teaser"},[i("form",{staticClass:"uk-form-stacked",on:{submit:function(t){t.preventDefault()}}},[i("div",{staticClass:"uk-margin"},[i("label",{staticClass:"uk-form-label",attrs:{for:"form-city"}},[t._v(t._s(t._f("trans")("Location")))]),t._v(" "),i("div",{staticClass:"uk-form-controls"},[i("div",{ref:"autocomplete",staticClass:"uk-autocomplete uk-width-1-1"},[i("input",{ref:"location",staticClass:"uk-input uk-width-1-1",attrs:{id:"form-city",type:"text",placeholder:t.location,autocomplete:"off"},on:{blur:t.clear}})])])]),t._v(" "),i("div",{staticClass:"uk-margin"},[i("span",{staticClass:"uk-form-label"},[t._v(t._s(t._f("trans")("Unit")))]),t._v(" "),i("div",{staticClass:"uk-form-controls uk-form-controls-text"},[i("p",{staticClass:"uk-margin-small"},[i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.widget.units,expression:"widget.units"}],staticClass:"uk-radio",attrs:{type:"radio",value:"metric"},domProps:{checked:t._q(t.widget.units,"metric")},on:{change:function(e){return t.$set(t.widget,"units","metric")}}}),t._v(" "+t._s(t._f("trans")("Metric")))])]),t._v(" "),i("p",{staticClass:"uk-margin-small"},[i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.widget.units,expression:"widget.units"}],staticClass:"uk-radio",attrs:{type:"radio",value:"imperial"},domProps:{checked:t._q(t.widget.units,"imperial")},on:{change:function(e){return t.$set(t.widget,"units","imperial")}}}),t._v(" "+t._s(t._f("trans")("Imperial")))])])])])])]),t._v(" "),"loading"!=t.status?i("div",{staticClass:"uk-card-body uk-padding-remove uk-inline-clip uk-width-1-1"},[i("img",{staticClass:"uk-width-1-1",attrs:{src:"../../../../../../app/system/assets/images/dashboard-location.jpg"}}),t._v(" "),i("div",{staticClass:"uk-position-cover uk-padding uk-light uk-flex uk-flex-middle uk-height-1-1",staticStyle:{"background-color":"rgba(0,0,0,.4)"}},[i("div",{staticClass:"uk-width-expand uk-flex uk-flex-column uk-flex-wrap-between uk-height-1-1"},[i("div",{staticClass:"uk-flex uk-flex-center uk-flex-middle uk-height-1-1"},[i("div",[t.time?i("h1",{staticClass:"uk-margin-remove uk-text-center pk-text-xlarge"},[t._v("\n                            "+t._s(t._f("date")(t.time,t.format))+"\n                        ")]):t._e(),t._v(" "),t.time?i("h3",{staticClass:"uk-text-center uk-margin-remove"},[t._v("\n                            "+t._s(t._f("date")(t.time,"longDate"))+"\n                        ")]):t._e()])]),t._v(" "),i("div",{staticClass:"uk-flex uk-flex-between uk-position-bottom uk-padding-small"},[t.widget.city?i("h3",{staticClass:"uk-margin-remove"},[t._v("\n                        "+t._s(t.widget.city)+"\n                    ")]):t._e(),t._v(" "),"done"==t.status?i("h3",{staticClass:"uk-flex uk-flex-middle uk-margin-remove"},[t._v("\n                        "+t._s(t.temperature)+" "),i("img",{staticClass:"uk-margin-small-left",attrs:{src:t.icon,width:"25",height:"25",alt:"Weather"}})]):t._e()])])])]):i("div",{staticClass:"uk-text-center"},[i("v-loader")],1)])},a=[];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a})},function(t,e){e.compare=function(t,e,i){let s,a;this.php_js=this.php_js||{},this.php_js.ENV=this.php_js.ENV||{};let n=0;const o={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1},r=function(t){return(t=(t=`${t}`.replace(/[_\-+]/g,".")).replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,".")).length?t.split("."):[-8]},l=function(t){return t?isNaN(t)?o[t]||-7:parseInt(t,10):0};for(t=r(t),e=r(e),a=Math.max(t.length,e.length),s=0;s<a;s++)if(t[s]!=e[s]){if(t[s]=l(t[s]),e[s]=l(e[s]),t[s]<e[s]){n=-1;break}if(t[s]>e[s]){n=1;break}}if(!i)return n;switch(i){case">":case"gt":return n>0;case">=":case"ge":return n>=0;case"<=":case"le":return n<=0;case"==":case"=":case"eq":return 0===n;case"<>":case"!=":case"ne":return 0!==n;case"":case"<":case"lt":return n<0;default:return null}}},function(t,e,i){"use strict";var s=i(9),a=i(2),n=i(1),o=Object(n.a)(a.default,s.a,s.b,!1,null,null,null);e.default=o.exports},function(t,e,i){"use strict";var s=i(10),a=i(4),n=i(1),o=Object(n.a)(a.default,s.a,s.b,!1,null,null,null);e.default=o.exports},function(t,e,i){"use strict";var s=i(11),a=i(6),n=i(1),o=Object(n.a)(a.default,s.a,s.b,!1,null,null,null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var s=i(8),a=i.n(s),n=i(0),o=i(12),r=i.n(o),l=i(13),d=i(14),u=i(15);window.Dashboard={name:"dashboard",el:"#dashboard",data:()=>_.extend({editing:{},update:{}},window.$data),created(){const t=this;this.Widgets=this.$resource("admin/dashboard{/id}"),this.$set(this,"widgets",this.widgets.filter((e,i)=>!!t.getType(e.type)&&(e.idx=void 0===e.idx?i:e.idx,e.column=void 0===e.column?0:e.column,!0))),this.checkVersion()},mounted(){const t=this;Object(n.findAll)(".uk-sortable[data-column]",Object(n.$)(this.$el)).forEach(e=>{const i=a.a.sortable(e,{group:"widgets",dragCustomClass:"pk-sortable-dragged-panel",handleClass:"pk-icon-handle"});a.a.util.on(i.$el,"added moved removed",(e,i,s,o)=>{if(o=e.type)switch(o){case"added":case"moved":case"removed":var r,l=t.widgets,d=parseInt(a.a.util.data(i.$el,"column"),10),u={};Object(n.each)(Object(n.findAll)("[data-idx]",Object(n.$)(i.$el)),(t,e)=>{(r=_.find(l,{id:t.getAttribute("data-id")})).column=d,r.idx=e}),l.forEach(t=>{u[t.id]=t}),t.$http.post("admin/dashboard/savewidgets",{widgets:u}).then(t=>{})}})})},computed:{columns(){let t=0;return _.groupBy(this.widgets,()=>t++%3)},hasUpdate(){return this.update&&r.a.compare(this.update.version,this.version,">")}},methods:{getColumn(t){return t=parseInt(t||0,10),_.sortBy(this.widgets.filter(e=>e.column==t),"idx")},add(t){let e=0;const i=Object(n.findAll)(".uk-sortable[data-column]",Object(n.$)("#dashboard"));i.forEach((t,s)=>{e=t.children.length<Object(n.toNodes)(i)[0].children.length?s:e}),this.Widgets.save({widget:_.merge({type:t.id,column:e,idx:100},t.defaults)}).then(function(t){const{data:e}=t;this.widgets.push(e),this.editing[e.id]=!0})},save(t){const e={widget:t};this.$emit("save",e),this.$trigger("save:widget",e),this.Widgets.save({id:t.id},e)},remove(t){this.Widgets.delete({id:t.id}).then(function(){this.widgets.splice(_.findIndex(this.widgets,{id:t.id}),1)})},getType(t){return _.find(this.getTypes(),{id:t})},getTypes(){const t=[];return _.forIn(this.$options.components,(e,i)=>{const{type:s}=e;s&&(s.component=i,t.push(s))}),t},checkVersion(){this.$http.get(`${this.api}/api/update`,{cache:60}).then(function(t){const e=t.data["nightly"==this.channel?"nightly":"latest"];e&&this.$set(this,"update",e)})}},components:{panel:l.default,feed:d.default,location:u.default}},Vue.ready(window.Dashboard)}]);