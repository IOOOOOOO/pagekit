!function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=51)}({0:function(t,e,n){"use strict";function i(t,e,n,i,s,o,r,a){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),r?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=l):s&&(l=a?function(){s.call(this,this.$root.$options.shadowRoot)}:s),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:c}}n.d(e,"a",function(){return i})},36:function(t,e){t.exports="<div> <div class=uk-margin> <label for=form-menu-title class=uk-form-label>{{ 'Menu Title' | trans }}</label> <div class=uk-form-controls> <input id=form-menu-title class=\"uk-form-width-large uk-input\" type=text name=title v-model=node.title v-validate=\"'required'\"> <div class=\"uk-text-meta uk-text-danger\" v-show=\"errors.first('title')\">{{ 'Invalid name.' | trans }}</div> </div> </div> <div class=uk-margin> <label for=form-slug class=uk-form-label>{{ 'Slug' | trans }}</label> <div class=uk-form-controls> <input id=form-slug class=\"uk-form-width-large uk-input\" type=text v-model=node.slug> </div> </div> <div class=uk-margin> <label for=form-status class=uk-form-label>{{ 'Status' | trans }}</label> <div class=uk-form-controls> <select id=form-status class=\"uk-form-width-large uk-select\" v-model.number=node.status> <option value=0>{{ 'Disabled' | trans }}</option> <option value=1>{{ 'Enabled' | trans }}</option> </select> </div> </div> <div class=uk-margin> <label class=uk-form-label>{{ 'Restrict Access' | trans }}</label> <div class=\"uk-form-controls uk-form-controls-text\"> <p v-for=\"role in roles\" class=uk-margin-small> <label><input class=uk-checkbox type=checkbox :value=role.id v-model.number=node.roles><span class=uk-margin-small-left>{{ role.name }}</span></label> </p> </div> </div> <div class=uk-margin> <label class=uk-form-label>{{ 'Menu' | trans }}</label> <div class=\"uk-form-controls uk-form-controls-text\"> <label><input class=uk-checkbox type=checkbox value=center-content v-model=node.data.menu_hide><span class=uk-margin-small-left>{{ 'Hide in menu' | trans }}</span></label> </div> </div> </div> "},51:function(t,e,n){"use strict";n.r(e);var i={props:["node","roles"],section:{label:"Settings"},created:function(){this.$options.components["template-settings"]=this.$root.$options.components["template-settings"]}},s=n(0),o=Object(s.a)(i,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"uk-form-horizontal"},[e("template-settings",{tag:"component",attrs:{node:this.node,roles:this.roles}})],1)},[],!1,null,null,null).exports,r={section:{label:"Settings",priority:0,active:"link"},inject:["$validator"],props:["node","roles","form"],computed:{behavior:{get:function(){return this.node.data.alias?"alias":this.node.data.redirect?"redirect":"link"},set:function(t){this.$set(this.node,"data",_.extend(this.node.data,{alias:"alias"===t,redirect:"redirect"===t&&this.node.link}))}}},created:function(){this.$options.components["template-settings"]=this.$root.$options.components["template-settings"],"redirect"===this.behavior&&(this.node.link=this.node.data.redirect),this.node.id||(this.node.status=1)},events:{"save:node":function(){"redirect"===this.behavior&&(this.node.data.redirect=this.node.link)}}},a=Object(s.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"uk-form-horizontal"},[n("div",{staticClass:"uk-margin"},[n("label",{staticClass:"uk-form-label",attrs:{for:"form-url"}},[t._v(t._s(t._f("trans")("Url")))]),t._v(" "),n("div",{staticClass:"uk-form-controls"},[n("input-link",{attrs:{id:"form-url",cls:"uk-form-width-large",name:"link",required:""},model:{value:t.node.link,callback:function(e){t.$set(t.node,"link",e)},expression:"node.link"}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.first("link"),expression:"errors.first('link')"}],staticClass:"uk-text-meta uk-text-danger"},[t._v("\n                "+t._s(t._f("trans")("Invalid url."))+"\n            ")])],1)]),t._v(" "),n("div",{staticClass:"uk-margin"},[n("label",{staticClass:"uk-form-label",attrs:{for:"form-type"}},[t._v(t._s(t._f("trans")("Type")))]),t._v(" "),n("div",{staticClass:"uk-form-controls"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.behavior,expression:"behavior"}],staticClass:"uk-form-width-large uk-select",attrs:{id:"form-type"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.behavior=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"link"}},[t._v("\n                    "+t._s(t._f("trans")("Link"))+"\n                ")]),t._v(" "),n("option",{attrs:{value:"alias"}},[t._v("\n                    "+t._s(t._f("trans")("URL Alias"))+"\n                ")]),t._v(" "),n("option",{attrs:{value:"redirect"}},[t._v("\n                    "+t._s(t._f("trans")("Redirect"))+"\n                ")])])])]),t._v(" "),n("template-settings",{tag:"component",attrs:{node:t.node,roles:t.roles,form:t.form},on:{"update:node":function(e){t.node=e},"update:roles":function(e){t.roles=e}}})],1)},[],!1,null,null,null).exports,l=n(36),c=n.n(l);window.Site={name:"page",el:"#site-edit",mixins:[Theme.Mixins.Helper],data:function(){return _.merge({sections:[],form:{},active:0,processing:!1},window.$data)},theme:{hiddenHtmlElements:["#site-edit > div:first-child"],elements:function(){var t=this,e=this;return{title:{scope:"breadcrumbs",type:"caption",caption:function(){var n=t.$options.filters.trans;return e.node.id&&n?n("Edit %type%",{type:e.type.label}):n("Add %type%",{type:e.type.label})}},savepage:{scope:"topmenu-left",type:"button",caption:"Save",class:"uk-button tm-button-success",spinner:function(){return e.processing},on:{click:function(){return e.submit()}},priority:1},close:{scope:"topmenu-left",type:"button",caption:e.node.id?"Close":"Cancel",class:"uk-button uk-button-text",attrs:{href:function(){return e.$url.route("admin/site/page")}},disabled:function(){return e.processing},priority:0}}}},created:function(){var t,e=[],n=_.kebabCase(this.type.id);_.forIn(this.$options.components,function(t,n){t.section&&e.push(_.extend({name:n,priority:0},t.section))}),e=_.sortBy(e.filter(function(i){return null===(t=i.name.match("(.+)--(.+)"))?!_.find(e,{name:"".concat(n,"--").concat(i.name)}):t[1]==n},this),"priority"),this.$set(this,"sections",e)},mounted:function(){var t=this;this.Nodes=this.$resource("api/site/node{/id}"),this.tab=UIkit.tab("#page-tab",{connect:"#page-content"}),UIkit.util.on(this.tab.connects,"show",function(e,n){if(n!=t.tab)return!1;for(var i in n.toggles)if(n.toggles[i].parentNode.classList.contains("uk-active")){t.active=i;break}}),this.$watch("active",function(t){this.tab.show(t)}),this.$state("active")},computed:{path:function(){return"".concat(this.node.path?this.node.path.split("/").slice(0,-1).join("/"):"","/").concat(this.node.slug||"")}},filers:{},methods:{submit:function(){var t=this;this.$validator.validateAll().then(function(e){e&&(t.processing=!0,t.save())})},save:function(){var t={node:this.node},e=this;this.$trigger("save:node",t),this.Nodes.save({id:this.node.id},t).then(function(t){var n=t.data;this.node.id||window.history.replaceState({},"",this.$url.route("admin/site/page/edit",{id:n.node.id})),this.$set(this,"node",n.node),this.$notify(this.$trans("%type% saved.",{type:this.type.label})),setTimeout(function(){e.processing=!1},500)},function(t){this.processing=!1,this.$notify(t.data,"danger")})}},components:{settings:o,"link--settings":a,"template-settings":{inject:["$validator"],props:["node","roles"],template:c.a}}},Vue.ready(window.Site)}});