!function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=22)}({22:function(t,e){t.exports={name:"user-index",el:"#users",mixins:[Theme.Mixins.Helper],data:function(){return _.merge({users:!1,config:{filter:this.$session.get("user.filter",{order:"username asc"})},pages:0,count:"",selected:[]},window.$data)},theme:{hiddenHtmlElements:["#users > div:first-child"],elements:function(){var t=this;return{adduser:{scope:"topmenu-left",type:"button",caption:"Add User",class:"uk-button uk-button-primary",attrs:{href:function(){return t.$url.route("admin/user/edit")}},priority:0},search:{scope:"navbar-right",type:"search",class:"uk-text-small",domProps:{value:function(){return t.config.filter.search||""}},on:{input:function(e){!t.config.filter.search&&t.$set(t.config.filter,"search",""),t.config.filter.search=e.target.value}}},actions:{scope:"topmenu-left",type:"dropdown",caption:"Actions",class:"uk-button uk-button-text",icon:{attrs:{"uk-icon":"triangle-down"}},dropdown:{options:function(){return"mode:click"}},actionIcons:!0,items:function(){return{publish:{caption:"Activate",on:{click:function(){return t.status(1)}}},unpublish:{caption:"Block",on:{click:function(){return t.status(0)}}},delete:{on:{click:function(e){return t.remove(e)}}}}},priority:2,disabled:function(){return!t.selected.length}},selected:{scope:"topmenu-right",type:"caption",caption:function(){return t.selected.length?t.$transChoice("{1} %count% User selected|]1,Inf[ %count% Users selected",t.selected.length,{count:t.selected.length}):t.$transChoice("{0} %count% Users|{1} %count% User|]1,Inf[ %count% Users",t.count,{count:t.count})},class:"uk-text-small",priority:1},pagination:{scope:"topmenu-right",type:"pagination",caption:"Pages",props:{value:function(){return t.config.page},pages:function(){return t.pages},name:function(){return t.$options.name},options:function(){return{lblPrev:"<span uk-pagination-previous></span>",lblNext:"<span uk-pagination-next></span>",displayedPages:3,edges:1}}},on:{input:function(e){"number"==typeof e&&(t.config.page=e)}},watch:function(){return t.users},vif:function(){return t.pages>1||t.config.page>0},priority:0}}}},mounted:function(){this.resource=this.$resource("api/user{/id}"),this.$watch("config.page",this.load,{immediate:!0})},watch:{"config.filter":{handler:function(t){this.config.page?this.config.page=0:this.load(),this.$session.set("user.filter",t)},deep:!0}},computed:{statuses:function(){var t=[{text:this.$trans("New"),value:"new"}].concat(_.map(this.config.statuses,function(t,e){return{text:t,value:e}}));return[{label:this.$trans("Filter by"),options:t}]},roles:function(){var t=this.config.roles.map(function(t){return{text:t.name,value:t.id}});return[{label:this.$trans("Filter by"),options:t}]}},methods:{active:function(t){return-1!=this.selected.indexOf(t.id)},save:function(t){this.resource.save({id:t.id},{user:t}).then(function(){this.load(),this.$notify("User saved.")},function(t){this.load(),this.$notify(t.data,"danger")})},status:function(t){var e=this.getSelected();e.forEach(function(e){e.status=t}),this.resource.save({id:"bulk"},{users:e}).then(function(){this.load(),this.$notify("Users saved.")},function(t){this.load(),this.$notify(t.data,"danger")})},remove:function(){this.resource.delete({id:"bulk"},{ids:this.selected}).then(function(){this.load(),this.$notify("Users deleted.")},function(t){this.load(),this.$notify(t.data,"danger")})},toggleStatus:function(t){t.status=t.status?0:1,this.save(t)},showVerified:function(t){return this.config.emailVerification&&t.data.verified},showRoles:function(t){var e=this;return _.reduce(t.roles,function(t,n){var i=_.find(e.config.roles,{id:n});return 2!==n&&i&&t.push(i.name),t},[],this).join(", ")},load:function(){this.resource.query({filter:this.config.filter,page:this.config.page}).then(function(t){var e=t.data;this.$set(this,"users",e.users),this.$set(this,"pages",e.pages),this.$set(this,"count",e.count),this.$set(this,"selected",[])},function(){this.$notify("Loading failed.","danger")})},getSelected:function(){return this.users.filter(function(t){return-1!==this.selected.indexOf(t.id)},this)}}},Vue.ready(t.exports)}});